(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,a){},271:function(e,t,a){"use strict";a.r(t);var o=a(1),n=a.n(o),s=a(16),r=a.n(s),l=(a(96),a(8)),i=a.n(l),c=a(18),u=a(21),d=a(22),h=a(25),p=a(23),f=a(26),m=a(2),g=a(90),b=a(52),k=a.n(b),v=(a(102),a(104),a(53)),O=a.n(v),y=(a(124),a(84)),S=a(55),w=(a(130),a(88)),j=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).state={listOfPortfolios:a.getStorageData(),newPortfolio:""},a.addPortfolio=a.addPortfolio.bind(Object(m.a)(Object(m.a)(a))),a.deletePortfolio=a.deletePortfolio.bind(Object(m.a)(Object(m.a)(a))),a.addStock=a.addStock.bind(Object(m.a)(Object(m.a)(a))),a.deleteStock=a.deleteStock.bind(Object(m.a)(Object(m.a)(a))),a.handleChangePortfolio=a.handleChangePortfolio.bind(Object(m.a)(Object(m.a)(a))),a.getStorageData=a.getStorageData.bind(Object(m.a)(Object(m.a)(a))),a.updateStocks=a.updateStocks.bind(Object(m.a)(Object(m.a)(a))),a.getData=a.getData.bind(Object(m.a)(Object(m.a)(a))),a.changeRate=a.changeRate.bind(Object(m.a)(Object(m.a)(a))),a.getCurrency=a.getCurrency.bind(Object(m.a)(Object(m.a)(a))),a.updateStocks(),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"handleChangePortfolio",value:function(e){this.setState({newPortfolio:e.target.value})}},{key:"addPortfolio",value:function(){var e,t=!1;for(e=0;e<this.state.listOfPortfolios.length;e++)this.state.listOfPortfolios[e].name===this.state.newPortfolio&&(t=!0);if(10===this.state.listOfPortfolios.length)alert("Couldn't add a new portfolio. Maximum number of portfolios is 10.");else if(t||0===this.state.newPortfolio.length)alert("Couldn't add a new portfolio. You have to give a unique name to the new portfolio.");else{var a={name:this.state.newPortfolio,stocks:[],changeRate:1,currency:"USD",stockfield:"stock"+this.state.newPortfolio,quantityfield:"quantity"+this.state.newPortfolio,deletefield:"delete"+this.state.newPortfolio,valuefield:"value"+this.state.newPortfolio,dropdown:"dropdown"+this.state.newPortfolio,valueOfStocks:0},o=this.getStorageData();o.push(a),localStorage.setItem("portfolios",JSON.stringify(o)),this.setState({listOfPortfolios:o,newPortfolio:""})}}},{key:"deletePortfolio",value:function(e){for(var t=this.state.listOfPortfolios,a=0;a<t.length;a++)t[a].name===e&&t.splice(a,1);localStorage.setItem("portfolios",""),localStorage.setItem("portfolios",JSON.stringify(t)),this.setState({listOfPortfolios:t})}},{key:"addStock",value:function(){var e=Object(c.a)(i.a.mark(function e(t,a,o){var n,s,r,l,c,u,d,h,p;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=this.state.listOfPortfolios,s=0;s<n.length;s++)n[s].name===t&&(r=s);for(l=n[r].changeRate,"USD"===n[r].currency&&(l=1),c=!1,u=0;u<n[r].stocks.length;u++)n[r].stocks[u].id===a.toUpperCase()&&(c=!0);if(!(n[r].stocks.length>49)){e.next=10;break}alert("Couldn't add a new stock. Maximum number of stocks is 50."),e.next=30;break;case 10:if(!c){e.next=14;break}alert("This stock is already in this portfolio."),e.next=30;break;case 14:if(0!==a.length){e.next=18;break}alert("Please give the name of the stock you want to add."),e.next=30;break;case 18:if(!isNaN(o)){e.next=22;break}alert("Please give a number as a quantity of stocks."),e.next=30;break;case 22:if(!(o<1)){e.next=26;break}alert("Please give a number larger than 0 as a quantity of stocks."),e.next=30;break;case 26:return e.next=28,this.getData(a);case 28:void 0!==(d=e.sent)&&(h={id:a.toUpperCase(),unitValue:parseFloat(d*l).toFixed(2),quantity:o,totalValue:(d*o*l).toFixed(2)},n[r].stocks.push(h),(p=n[r]).valueOfStocks=(parseFloat(p.valueOfStocks)+parseFloat(h.totalValue)).toFixed(2),n[r]=p,localStorage.setItem("portfolios",""),localStorage.setItem("portfolios",JSON.stringify(n)),this.setState({listOfPortfolios:n}));case 30:case"end":return e.stop()}},e,this)}));return function(t,a,o){return e.apply(this,arguments)}}()},{key:"deleteStock",value:function(e,t){for(var a=this.state.listOfPortfolios,o=0;o<a.length;o++)if(a[o].name===e)var n=o;for(var s=0;s<a[n].stocks.length;s++)if(a[n].stocks[s].id===t){var r=a[n];r.valueOfStocks=(parseFloat(r.valueOfStocks)-parseFloat(a[n].stocks[s].totalValue)).toFixed(2),a[n]=r,a[n].stocks.splice(s,1)}localStorage.setItem("portfolios",""),localStorage.setItem("portfolios",JSON.stringify(a)),this.setState({listOfPortfolios:a})}},{key:"getStorageData",value:function(){var e=[];if(localStorage.getItem("portfolios")){var t=localStorage.getItem("portfolios");e=JSON.parse(t)}return e}},{key:"changeRate",value:function(){var e=Object(c.a)(i.a.mark(function e(t,a){var o,n,s,r,l,c,u,d;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(o=0,n=this.state.listOfPortfolios,s=0;s<n.length;s++)n[s].name===t&&(r=s);return e.next=5,this.getCurrency();case 5:for(l=e.sent,c=l.rates.EUR,"USD"===a&&(c=1/c),n[r].changeRate=c,n[r].currency=a,u=0;u<n[r].stocks.length;u++)d={id:n[r].stocks[u].id,unitValue:(n[r].stocks[u].unitValue*n[r].changeRate).toFixed(2),quantity:n[r].stocks[u].quantity,totalValue:(n[r].stocks[u].unitValue*n[r].stocks[u].quantity*n[r].changeRate).toFixed(2)},o=(parseFloat(o)+parseFloat(d.totalValue)).toFixed(2),n[r].stocks[u]=d,localStorage.setItem("portfolios",""),localStorage.setItem("portfolios",JSON.stringify(n)),this.setState({listOfPortfolios:n});n[r].valueOfStocks=o,localStorage.setItem("portfolios",""),localStorage.setItem("portfolios",JSON.stringify(n)),this.setState({listOfPortfolios:n});case 15:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getCurrency",value:function(){var e=Object(c.a)(i.a.mark(function e(){var t,a,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"https://openexchangerates.org/api/latest.json?app_id=6438a59eedb743fea1710706c62f2edc",e.next=3,O.a.get("https://openexchangerates.org/api/latest.json?app_id=6438a59eedb743fea1710706c62f2edc");case 3:return t=e.sent,e.next=6,t;case 6:return a=e.sent,o=a.data,e.next=10,o;case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updateStocks",value:function(){var e=Object(c.a)(i.a.mark(function e(){var t,a,o,n,s,r,l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.listOfPortfolios,a=0;case 2:if(!(a<t.length)){e.next=24;break}o=0,n=1,"EUR"===t[a].currency&&(n=t[a].changeRate),s=0;case 7:if(!(s<t[a].stocks.length)){e.next=21;break}return e.next=10,this.getData(t[a].stocks[s].id);case 10:r=e.sent,l={id:t[a].stocks[s].id,unitValue:(r*n).toFixed(2),quantity:t[a].stocks[s].quantity,totalValue:(r*t[a].stocks[s].quantity*n).toFixed(2)},o=(parseFloat(o)+parseFloat(l.totalValue)).toFixed(2),t[a].stocks[s]=l,t[a].valueOfStocks=o,localStorage.setItem("portfolios",""),localStorage.setItem("portfolios",JSON.stringify(t)),this.setState({listOfPortfolios:t});case 18:s++,e.next=7;break;case 21:a++,e.next=2;break;case 24:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getData",value:function(){var e=Object(c.a)(i.a.mark(function e(t){var a,o,n,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://api.iextrading.com/1.0/stock/"+t+"/price",e.prev=1,e.next=4,O.a.get(a);case 4:return o=e.sent,e.next=7,o;case 7:return n=e.sent,s=n.data,e.next=11,s;case 11:return e.abrupt("return",e.sent);case 14:return e.prev=14,e.t0=e.catch(1),alert("Couldn't get the value of stock "+t+"."),e.abrupt("return");case 18:case"end":return e.stop()}},e,this,[[1,14]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.listOfPortfolios;return n.a.createElement("div",null,n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-10",align:"left"},n.a.createElement("input",{type:"text",placeholder:"Portfolio name",onChange:this.handleChangePortfolio,value:this.state.newPortfolio}),n.a.createElement("input",{type:"submit",className:"shadowbutton",value:"Add new portfolio",onClick:this.addPortfolio}))),n.a.createElement("div",{className:"row"},t.map(function(a,o){return n.a.createElement(E,{key:t[o].name,name:t[o].name,stocks:t[o].stocks,changeRate:e.changeRate,currency:t[o].currency,deletePortfolio:e.deletePortfolio,addStock:e.addStock,deleteStock:e.deleteStock,stockfield:t[o].stockfield,quantityfield:t[o].quantityfield,deletefield:t[o].deletefield,valuefield:t[o].valuefield,dropdown:t[o].dropdown,valueOfStocks:t[o].valueOfStocks,portfolioChangeRate:t[o].changeRate})})))}}]),t}(o.Component),E=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).state={selectedOption:null,columns:[{Header:"Name",accessor:"id"},{Header:"Unit value ",accessor:"unitValue"},{Header:"Quantity",accessor:"quantity"},{Header:"Total value ",accessor:"totalValue"}],endDate:new Date,startDate:new Date((new Date).setFullYear((new Date).getFullYear()-1)),labels:[],datasets:[]},a.add=a.add.bind(Object(m.a)(Object(m.a)(a))),a.delete=a.delete.bind(Object(m.a)(Object(m.a)(a))),a.handleChangeCurrency=a.handleChangeCurrency.bind(Object(m.a)(Object(m.a)(a))),a.showGraph=a.showGraph.bind(Object(m.a)(Object(m.a)(a))),a.clearGraphData=a.clearGraphData.bind(Object(m.a)(Object(m.a)(a))),a.handleChangeStartDate=a.handleChangeStartDate.bind(Object(m.a)(Object(m.a)(a))),a.handleChangeEndDate=a.handleChangeEndDate.bind(Object(m.a)(Object(m.a)(a))),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"showGraph",value:function(e){var t=this,o=[],n=this.state.datasets,s=[],r=1;"EUR"===this.props.currency&&(r=this.props.portfolioChangeRate);var l="https://api.iextrading.com/1.0/stock/"+this.props.stocks[e].id+"/chart/1y";fetch(l).then(function(e){return e.json()}).then(function(l){if(l==={})alert("Couldn't get the data.");else{for(var i=0;i<l.length;i++)l[i].date>=t.state.startDate.toISOString().slice(0,10)&&l[i].date<=t.state.endDate.toISOString().slice(0,10)&&(o.push(l[i].date),s.push(parseFloat(l[i].close)*parseFloat(r)));var c=a(270);n.push({label:t.props.stocks[e].id,data:s,borderColor:c(),spanGaps:!0}),t.setState({labels:o,datasets:n})}},function(e){alert("Couldn't get the data.")})}},{key:"clearGraphData",value:function(){this.setState({labels:[],datasets:[]})}},{key:"add",value:function(){this.props.addStock(this.props.name,document.getElementById(this.props.stockfield).value,document.getElementById(this.props.quantityfield).value),document.getElementById(this.props.stockfield).value="",document.getElementById(this.props.quantityfield).value=""}},{key:"delete",value:function(e){this.props.deleteStock(this.props.name,e)}},{key:"handleChangeCurrency",value:function(e){e.value!==this.props.currency&&this.props.changeRate(this.props.name,e.value)}},{key:"handleChangeStartDate",value:function(e){this.setState({startDate:new Date(e)})}},{key:"handleChangeEndDate",value:function(e){this.setState({endDate:new Date(e)})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{key:this.props.id,className:"col-5 frameborder",align:"left"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"inline"}," ",n.a.createElement("h2",null,this.props.name)," "),n.a.createElement("div",{className:"right"},n.a.createElement("button",{className:"deletebutton right",onClick:function(){e.props.deletePortfolio(e.props.name)}},"X"))),n.a.createElement("div",{className:"row"},n.a.createElement(g.a,{data:this.props.stocks.map(function(e){return e}),columns:this.state.columns,className:"-striped -highlight",style:{height:"300px"}}),n.a.createElement("div",{className:"row"},n.a.createElement("br",null),"Total value: ",this.props.valueOfStocks," ",this.props.currency,n.a.createElement("div",{className:"right"},n.a.createElement(k.a,{className:"dropdown",options:["EUR","USD"],value:this.props.currency,onChange:this.handleChangeCurrency}))),n.a.createElement("div",{className:"row"},n.a.createElement("input",{type:"text",size:"7",id:this.props.stockfield,placeholder:"Stock name"}),n.a.createElement("input",{type:"text",size:"5",id:this.props.quantityfield,placeholder:"Quantity"}),n.a.createElement("button",{className:"shadowbutton",onClick:function(){e.add()}},"Add stock"),n.a.createElement("div",{className:"right"},n.a.createElement(C,{stocks:this.props.stocks,delete:this.delete}))),n.a.createElement("div",{className:"row frameborder"},n.a.createElement("div",{className:"row"},n.a.createElement("b",null,"Draw a graph from selected time frame (maximum is one year)")," "),"Start date",n.a.createElement(S.a,{selected:this.state.startDate,onChange:this.handleChangeStartDate}),"End date",n.a.createElement(S.a,{selected:this.state.endDate,onChange:this.handleChangeEndDate}),n.a.createElement(y.a,{trigger:n.a.createElement("button",{className:"shadowbutton"}," Graph "),modal:!0,closeOnDocumentClick:!0},n.a.createElement("span",null," ",n.a.createElement(x,{stocks:this.props.stocks,graphData:this.state.graphData,labels:this.state.labels,datasets:this.state.datasets,showGraph:this.showGraph,clearGraphData:this.clearGraphData,currency:this.props.currency})," ")))))}}]),t}(o.Component),C=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).state={selectedOption:null,data:{labels:a.props.labels}},a.handleChangeOption=a.handleChangeOption.bind(Object(m.a)(Object(m.a)(a))),a.callDelete=a.callDelete.bind(Object(m.a)(Object(m.a)(a))),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"handleChangeOption",value:function(e){this.setState({selectedOption:e.value})}},{key:"callDelete",value:function(){this.props.delete(this.state.selectedOption),this.setState({selectedOption:null})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement("div",{className:"right"},n.a.createElement(k.a,{className:"dropdown",options:this.props.stocks.map(function(e){return e.id}),value:this.state.selectedOption,onChange:this.handleChangeOption,placeholder:"Select"}),n.a.createElement("input",{type:"submit",className:"shadowbutton",value:"Remove",onClick:function(){e.callDelete()}})))}}]),t}(o.Component),x=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(c.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.clearGraphData();case 2:for(t=0;t<this.props.stocks.length;t++)this.props.showGraph(t);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e={labels:this.props.labels,datasets:this.props.datasets};return n.a.createElement("div",null,n.a.createElement("h2",null,"Performance of stocks in ",this.props.currency),n.a.createElement(w.a,{data:e}))}}]),t}(o.Component),D=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"row"},n.a.createElement(j,null)))}}]),t}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(n.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},91:function(e,t,a){e.exports=a(271)},96:function(e,t,a){}},[[91,2,1]]]);
//# sourceMappingURL=main.155a612b.chunk.js.map